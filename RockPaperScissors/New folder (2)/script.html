var userShape = ["rock", "paper", "scissors"];
var compShape = ["rock", "paper", "scissors"];
var userScore = 0;
var compScore = 0;
var tieGames = 0;
var comchoose = '';
var userchoose = '';

var output = document.getElementById('stage');
output.style.fontSize = '3em'

function startGame(){    
    randomShape(); 
    checkResult();
    updateScores();
}

function resetGame(){    
    location.reload();   

   // 5. If the game end, user MUST click reset before start the new game
}


function selectedShape(obj){ 
    
    // 5. If the game end, user MUST click reset before start the new game

    output.innerText = ''
    document.getElementsByTagName('th')[0].innerText = `Game #${userScore+compScore+tieGames+1}`
    document.getElementById("comp_rockImg").style.opacity = 1;
    document.getElementById("comp_paperImg").style.opacity = 1;
    document.getElementById("comp_scissorsImg").style.opacity = 1;

    // 1. Write some code here to specify the userShape based on the image they clicked.

    if (obj == "user_rockImg") {
        
        document.getElementById("user_rockImg").style.opacity = 1;
        document.getElementById("user_paperImg").style.opacity = 0.2;
        document.getElementById("user_scissorsImg").style.opacity = 0.2;
    }
    if (obj == "user_paperImg") {
         document.getElementById("user_rockImg").style.opacity = 0.2;
         document.getElementById("user_paperImg").style.opacity = 1;
         document.getElementById("user_scissorsImg").style.opacity = 0.2;
    }
    if (obj == "user_scissorsImg") {
         document.getElementById("user_rockImg").style.opacity = 0.2;
         document.getElementById("user_paperImg").style.opacity = 0.2;
         document.getElementById("user_scissorsImg").style.opacity = 1;
    } 
    userchoose = obj;
    // After user selected their shape, the start button will be activated.
    document.getElementById('startButton').disabled = false;    
}

    
function randomShape(){
    var com = ["comp_rockImg","comp_paperImg","comp_scissorsImg"];
    var randomItem = com[Math.floor(Math.random()*com.length)];
    // 2. Write some code here to specify the compShape randomly.
    if (randomItem == "comp_rockImg") {
        
        document.getElementById("comp_rockImg").style.opacity = 1;
        document.getElementById("comp_paperImg").style.opacity = 0.2;
        document.getElementById("comp_scissorsImg").style.opacity = 0.2;
    }
    if (randomItem == "comp_paperImg") {
         document.getElementById("comp_rockImg").style.opacity = 0.2;
         document.getElementById("comp_paperImg").style.opacity = 1;
         document.getElementById("comp_scissorsImg").style.opacity = 0.2;
    }
    if (randomItem == "comp_scissorsImg") {
         document.getElementById("comp_rockImg").style.opacity = 0.2;
         document.getElementById("comp_paperImg").style.opacity = 0.2;
         document.getElementById("comp_scissorsImg").style.opacity = 1;
    } 
    comchoose = randomItem;
    
    document.getElementById('startButton').disabled = true;   
}

function checkResult(){
    // 3. Write some code here to compute the result of each game, and update
    // userScore and compScore
    if (userchoose == "user_rockImg" && comchoose == "comp_rockImg") {   
       
        tieGames += 1;
        
    }
    if (userchoose == "user_rockImg" && comchoose == "comp_paperImg") {   
       
        compScore += 1;
       
    }
    if (userchoose == "user_rockImg" && comchoose == "comp_scissorsImg") {   
       
        userScore += 1;
        
    }
    if (userchoose == "user_paperImg" && comchoose == "comp_rockImg") {   
      
        userScore += 1;
     
    }
    if (userchoose == "user_paperImg" && comchoose == "comp_paperImg") {   
      
        tieGames += 1;
 
    }
    if (userchoose == "user_paperImg" && comchoose == "comp_scissorsImg") {   

        compScore += 1;

    }
    if (userchoose == "user_scissorsImg" && comchoose == "comp_rockImg") {   

        compScore += 1;
 
    }
    if (userchoose == "user_scissorsImg" && comchoose == "comp_paperImg") {   
 
        userScore += 1;
 
    }
    if (userchoose == "user_scissorsImg" && comchoose == "comp_scissorsImg") {   

        tieGames += 1;
     
    }
    // After check the result of the current match, the start button will be deactivated. 
   
}

function updateScores(){
    // 4. Write some code here to update the scores of the whole game. 
    document.getElementById("userScore").innerHTML = "#Game win: "+userScore;
    document.getElementById("compScore").innerHTML = "#Game win: "+compScore;
    if(userScore == 3){
        document.getElementById("winword").style.opacity = 1;  
        document.getElementById("bung").style.visibility = "visible"; 
        document.getElementById('startButton').disabled = true; 
        document.getElementById('resetButton').disabled = false;
    }
    if(compScore == 3){
        document.getElementById("loseword").style.opacity = 1;
        document.getElementById("bung").style.visibility = "visible";
        document.getElementById('startButton').disabled = true;
        document.getElementById('resetButton').disabled = false;  
    }
    // If there exist a player with more than 3 scores, the game end.
}

function animateSequence(){for(var n=document.getElementsByClassName("sequence"),a=0;a<n.length;a++){var e=n[a],t=e.innerHTML;t=t.trim();var i="",m=100;for(l=0;l<t.length;l++)" "!=t[l]?(i+='<span style="animation-delay:'+m+"ms; -moz-animation-delay:"+m+"ms; -webkit-animation-delay:"+m+'ms; ">'+t[l]+"</span>",m+=150):i+=t[l];e.innerHTML=i}}function animateRandom(){for(var n=document.getElementsByClassName("random"),a=0;a<n.length;a++){var e=n[a],t=e.innerHTML;t=t.trim();var i=70,m=new Array,o=new Array;for(j=0;j<t.length;j++){for(;;){var r=getRandomInt(0,t.length-1);if(-1==m.indexOf(r))break}m[j]=r}for(l=0;l<m.length;l++){var s="",d=m[l];" "!=t[d]?(s='<span style="animation-delay:'+i+"ms; -moz-animation-delay:"+i+"ms; -webkit-animation-delay:"+i+'ms; ">'+t[d]+"</span>",o[d]=s):o[d]=t[d],i+=80}o=o.join(""),e.innerHTML=o}}function getRandomInt(n,a){return Math.floor(Math.random()*(a-n+1))+n}window.onload=function(){animateSequence(),animateRandom()};